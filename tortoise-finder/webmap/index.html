<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Confirmed Tortoise Images - Fernandina</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
<style>
  html, body, #map { height: 100%; margin: 0; }
  .popup-img { max-width: 420px; height: auto; display: block; }
  .coords { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
</style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script>
const fc = {"type": "FeatureCollection", "features": [{"type": "Feature", "properties": {"name": "B016T-20210215-161808_JPG.rf.0d13c496d282252d8dbbb2f0b0b06f11.jpg", "image": "../data/outputs/confirmed/B016T-20210215-161808_JPG.rf.0d13c496d282252d8dbbb2f0b0b06f11.jpg", "lat": -0.401094970000833, "lon": -91.6030311199972}, "geometry": {"type": "Point", "coordinates": [-91.6030311199972, -0.401094970000833]}}, {"type": "Feature", "properties": {"name": "B039T-20200712-202931_jpg.rf.c56d90b284a34dfe293dcde6bf014c11.jpg", "image": "../data/outputs/confirmed/B039T-20200712-202931_jpg.rf.c56d90b284a34dfe293dcde6bf014c11.jpg", "lat": -0.308029370011111, "lon": -91.5104754999694}, "geometry": {"type": "Point", "coordinates": [-91.5104754999694, -0.308029370011111]}}, {"type": "Feature", "properties": {"name": "B011T-20210124-151121_JPG_jpg.rf.6766bb1520318cfb76366ce2e11aec56.jpg", "image": "../data/outputs/confirmed/B011T-20210124-151121_JPG_jpg.rf.6766bb1520318cfb76366ce2e11aec56.jpg", "lat": -0.349793239841667, "lon": -91.6354932400094}, "geometry": {"type": "Point", "coordinates": [-91.6354932400094, -0.349793239841667]}}, {"type": "Feature", "properties": {"name": "B002T-20200711-195128_jpg.rf.b1a61a79ac1cd6d5141a586ef75b9b3c.jpg", "image": "../data/outputs/confirmed/B002T-20200711-195128_jpg.rf.b1a61a79ac1cd6d5141a586ef75b9b3c.jpg", "lat": -0.476824380011111, "lon": -91.5572223099889}, "geometry": {"type": "Point", "coordinates": [-91.5572223099889, -0.476824380011111]}}, {"type": "Feature", "properties": {"name": "B002T-20200711-195128_jpg.rf.3163358b979c87500ccec747ea15de51.jpg", "image": "../data/outputs/confirmed/B002T-20200711-195128_jpg.rf.3163358b979c87500ccec747ea15de51.jpg", "lat": -0.393488140011111, "lon": -91.5901135499806}, "geometry": {"type": "Point", "coordinates": [-91.5901135499806, -0.393488140011111]}}, {"type": "Feature", "properties": {"name": "B002T-20200711-195051_jpg.rf.d9ba41d82c604a76856c0c291a2bc4ae.jpg", "image": "../data/outputs/confirmed/B002T-20200711-195051_jpg.rf.d9ba41d82c604a76856c0c291a2bc4ae.jpg", "lat": -0.461444330002778, "lon": -91.5032938900056}, "geometry": {"type": "Point", "coordinates": [-91.5032938900056, -0.461444330002778]}}, {"type": "Feature", "properties": {"name": "B002T-20200711-195051_jpg.rf.74e37512049bd6974faa79a4d43003f7.jpg", "image": "../data/outputs/confirmed/B002T-20200711-195051_jpg.rf.74e37512049bd6974faa79a4d43003f7.jpg", "lat": -0.390818470002778, "lon": -91.4055966000056}, "geometry": {"type": "Point", "coordinates": [-91.4055966000056, -0.390818470002778]}}, {"type": "Feature", "properties": {"name": "B002T-20200711-195051_jpg.rf.f301d702865fdd5c073ab7765a09b543.jpg", "image": "../data/outputs/confirmed/B002T-20200711-195051_jpg.rf.f301d702865fdd5c073ab7765a09b543.jpg", "lat": -0.318199590001944, "lon": -91.4624176799972}, "geometry": {"type": "Point", "coordinates": [-91.4624176799972, -0.318199590001944]}}, {"type": "Feature", "properties": {"name": "B002T-20200711-195128_jpg.rf.90bf1a6defdb2eeae394c4cb55ccf82f.jpg", "image": "../data/outputs/confirmed/B002T-20200711-195128_jpg.rf.90bf1a6defdb2eeae394c4cb55ccf82f.jpg", "lat": -0.422178799966667, "lon": -91.4395297899889}, "geometry": {"type": "Point", "coordinates": [-91.4395297899889, -0.422178799966667]}}, {"type": "Feature", "properties": {"name": "B002T-20200711-195135_jpg.rf.015b6f126a07034925a535a302b92ba9.jpg", "image": "../data/outputs/confirmed/B002T-20200711-195135_jpg.rf.015b6f126a07034925a535a302b92ba9.jpg", "lat": -0.392737260019444, "lon": -91.6375094099806}, "geometry": {"type": "Point", "coordinates": [-91.6375094099806, -0.392737260019444]}}]};
const map = L.map('map');
// Base layers
const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors' });
const esri = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { maxZoom: 19, attribution: 'Tiles &copy; Esri' });
const baseLayers = { 'OSM': osm, 'Satellite': esri };
// Markers
const markers = [];
const geo = L.geoJSON(fc, {
        pointToLayer: function(feature, latlng) {
            return L.marker(latlng);
        },
        onEachFeature: function(feature, layer) {
            const p = feature.properties || {};
            const img = p.image;
            const lat = p.lat;
            const lon = p.lon;
            const name = p.name || 'image';
            const popupHtml = `
                <div>
                  <div><strong>${name}</strong></div>
                  <div class="coords">Lat: ${lat.toFixed(6)}, Lon: ${lon.toFixed(6)}</div>
                  <div style="margin:6px 0;"><a href="${img}" target="_blank" rel="noopener">Open full image</a></div>
                  <img class="popup-img" src="${img}" alt="${name}"/>
                </div>
            `;
            layer.bindPopup(popupHtml);
            layer.bindTooltip(name, {direction: 'top'});
            markers.push(layer);
        }
    });
geo.addTo(map);
// Fit map to markers or set default view
if (markers.length > 0) {
    const group = L.featureGroup(markers);
    map.fitBounds(group.getBounds().pad(0.2));
} else {
    map.setView([0, -91.6], 10);
}
osm.addTo(map);
L.control.layers(baseLayers).addTo(map);
</script>
</body>
</html>